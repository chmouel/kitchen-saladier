db:
  image: kollaglue/fedora-rdo-mariadb
  expose:
    - "3306"

  environment:
    DB_ROOT_PASSWORD: password

keystonemaster:
  build: keystone/

  links:
    - db:mariadbmaster

  expose:
    - "5000"

  ports:
    - "35357:35357"

  environment:
    KEYSTONE_ADMIN_TOKEN: ADMINTOKEN
    DB_ROOT_PASSWORD: password
    KEYSTONE_DB_PASSWORD: password
    KEYSTONE_ADMIN_PASSWORD: password
    ADMIN_TENANT_NAME: admin

saladier:
  build: ../../
  links:
    - keystonemaster

  volumes:
    - ../../:/code

  command: ./tools/container/saladier/start.sh

  environment:
    SALADIER_USER_PASSWORD: password

  ports:
    - "8777:8777"
